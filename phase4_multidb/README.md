# Phase 4: ä»–ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å±•é–‹

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”µ è¨ˆç”»ä¸­
**æœŸé–“**: 2026å¹´1æœˆ6æ—¥ - 2æœˆ14æ—¥

## ç›®æ¨™

å…¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¯¾å¿œå®Œäº†ï¼šMySQL, Redis, Elasticsearch, SQL Server

## ä¸»è¦æ©Ÿèƒ½

### Week 11-12: MySQLå¯¾å¿œ

#### Task 15.1: MySQLãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…

**å®Ÿè£…å†…å®¹**:
- SQLæ–‡è§£æ
- JOINæ¤œå‡º
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³è¿½è·¡
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½¿ç”¨çŠ¶æ³

**MySQLå›ºæœ‰ã®å•é¡Œæ¤œå‡º**:
- N+1å•é¡Œ
- ãƒ•ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚­ãƒ£ãƒ³
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³æ¼ã‚Œ
- ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ãƒªã‚¹ã‚¯

#### Task 15.2: MySQLçµ±åˆãƒ†ã‚¹ãƒˆ
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- çµ±åˆãƒ†ã‚¹ãƒˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

### Week 13-14: Redis/Elasticsearchå¯¾å¿œ

#### Task 16.1: Redisãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…

**å®Ÿè£…å†…å®¹**:
- Redisã‚³ãƒãƒ³ãƒ‰è§£æ
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- TTLè¨­å®šæ¤œè¨¼
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æ¨å®š

**Rediså›ºæœ‰ã®å•é¡Œæ¤œå‡º**:
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹ç‡é«˜
- TTLæœªè¨­å®š
- ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯
- ã‚­ãƒ¼è¨­è¨ˆã®å•é¡Œ

#### Task 16.2: Elasticsearchãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…

**å®Ÿè£…å†…å®¹**:
- ã‚¯ã‚¨ãƒªDSLè§£æ
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆè©•ä¾¡
- ã‚·ãƒ£ãƒ¼ãƒ‰è¨­å®šæ¤œè¨¼
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œæ¤œå‡º

**Elasticsearchå›ºæœ‰ã®å•é¡Œæ¤œå‡º**:
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆã®éåŠ¹ç‡
- ã‚·ãƒ£ãƒ¼ãƒ‰æ•°ã®ä¸é©åˆ‡
- ãƒ¬ãƒ—ãƒªã‚«è¨­å®šã®å•é¡Œ
- ã‚¯ã‚¨ãƒªã®N+1å•é¡Œ

### Week 15-16: SQL Serverå¯¾å¿œã¨æœ€çµ‚çµ±åˆ

#### Task 17.1: SQL Serverãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…

**å®Ÿè£…å†…å®¹**:
- T-SQLè§£æ
- ã‚¹ãƒˆã‚¢ãƒ‰ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£åˆ†æ
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–

**SQL Serverå›ºæœ‰ã®å•é¡Œæ¤œå‡º**:
- ã‚¹ãƒˆã‚¢ãƒ‰ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ†é›¢ãƒ¬ãƒ™ãƒ«ã®ä¸é©åˆ‡
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- çµ±è¨ˆæƒ…å ±ã®æ›´æ–°æ¼ã‚Œ

#### Task 17.2: å…¨DBçµ±åˆãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆå†…å®¹**:
- 5ç¨®DBåŒæ™‚åˆ†æ
- ã‚¯ãƒ­ã‚¹DBæ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- E2Eãƒ†ã‚¹ãƒˆ

## æˆåŠŸæ¡ä»¶

- [ ] 5ç¨®DBå…¨å¯¾å¿œ
- [ ] ã‚¯ãƒ­ã‚¹DBæ•´åˆæ€§ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
- [ ] çµ±åˆE2Eãƒ†ã‚¹ãƒˆæˆåŠŸ
- [ ] å…¨DBå•é¡Œæ¤œå‡ºç‡ > 80%

## äºˆç®—

Phase 3ã¨åŒç­‰: $985/æœˆ

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆäºˆå®šï¼‰

```
phase4_multidb/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ cassandra_analyzer/
â”‚       â”œâ”€â”€ parsers/
â”‚       â”‚   â”œâ”€â”€ mysql_parser.py        # MySQLãƒ‘ãƒ¼ã‚µãƒ¼
â”‚       â”‚   â”œâ”€â”€ redis_parser.py        # Redisãƒ‘ãƒ¼ã‚µãƒ¼
â”‚       â”‚   â”œâ”€â”€ elasticsearch_parser.py # Elasticsearchãƒ‘ãƒ¼ã‚µãƒ¼
â”‚       â”‚   â””â”€â”€ sqlserver_parser.py    # SQL Serverãƒ‘ãƒ¼ã‚µãƒ¼
â”‚       â”œâ”€â”€ detectors/
â”‚       â”‚   â”œâ”€â”€ mysql/
â”‚       â”‚   â”‚   â”œâ”€â”€ n_plus_one_detector.py
â”‚       â”‚   â”‚   â”œâ”€â”€ full_scan_detector.py
â”‚       â”‚   â”‚   â””â”€â”€ deadlock_detector.py
â”‚       â”‚   â”œâ”€â”€ redis/
â”‚       â”‚   â”‚   â”œâ”€â”€ cache_miss_detector.py
â”‚       â”‚   â”‚   â””â”€â”€ ttl_detector.py
â”‚       â”‚   â”œâ”€â”€ elasticsearch/
â”‚       â”‚   â”‚   â”œâ”€â”€ index_design_detector.py
â”‚       â”‚   â”‚   â””â”€â”€ shard_detector.py
â”‚       â”‚   â””â”€â”€ sqlserver/
â”‚       â”‚       â”œâ”€â”€ stored_proc_detector.py
â”‚       â”‚       â””â”€â”€ isolation_level_detector.py
â”‚       â””â”€â”€ analyzers/
â”‚           â””â”€â”€ cross_db_analyzer.py   # ã‚¯ãƒ­ã‚¹DBæ•´åˆæ€§
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ test_mysql_parser.py
â”‚   â”‚   â”œâ”€â”€ test_redis_parser.py
â”‚   â”‚   â”œâ”€â”€ test_elasticsearch_parser.py
â”‚   â”‚   â””â”€â”€ test_sqlserver_parser.py
â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â””â”€â”€ test_multi_db_integration.py
â”‚   â””â”€â”€ e2e/
â”‚       â””â”€â”€ test_full_multi_db_analysis.py
â””â”€â”€ README.md                          # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## å¯¾å¿œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è©³ç´°

### 1. MySQL
- **ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: `sqlparse`, `sqlalchemy`
- **ä¸»ãªå•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³**: N+1, ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³, ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³æ¼ã‚Œ
- **æ¨å®šå·¥æ•°**: 3æ—¥

### 2. Redis
- **ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: ã‚«ã‚¹ã‚¿ãƒ å®Ÿè£…ï¼ˆã‚³ãƒãƒ³ãƒ‰æ–‡å­—åˆ—è§£æï¼‰
- **ä¸»ãªå•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³**: TTLæœªè¨­å®š, ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯, ã‚­ãƒ¼è¨­è¨ˆ
- **æ¨å®šå·¥æ•°**: 2æ—¥

### 3. Elasticsearch
- **ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: ã‚«ã‚¹ã‚¿ãƒ å®Ÿè£…ï¼ˆJSON DSLè§£æï¼‰
- **ä¸»ãªå•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³**: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­è¨ˆ, ã‚·ãƒ£ãƒ¼ãƒ‰è¨­å®š, ã‚¯ã‚¨ãƒªN+1
- **æ¨å®šå·¥æ•°**: 3æ—¥

### 4. SQL Server
- **ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: `sqlparse`, `pyodbc`
- **ä¸»ãªå•é¡Œãƒ‘ã‚¿ãƒ¼ãƒ³**: ã‚¹ãƒˆã‚¢ãƒ‰ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£, åˆ†é›¢ãƒ¬ãƒ™ãƒ«, ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- **æ¨å®šå·¥æ•°**: 3æ—¥

## ã‚¯ãƒ­ã‚¹DBæ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ•´åˆæ€§ï¼ˆCassandra â†” Redisï¼‰
```python
# Cassandraã®æ›´æ–°ãŒRedisã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«åæ˜ ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if cassandra_update_detected:
    check_redis_cache_invalidation()
```

### ãƒ‡ãƒ¼ã‚¿åŒæœŸï¼ˆCassandra â†” MySQLï¼‰
```python
# Cassandraã¨MySQLã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
compare_data_between_dbs(cassandra_table, mysql_table)
```

### æ¤œç´¢åŒæœŸï¼ˆCassandra â†” Elasticsearchï¼‰
```python
# Cassandraã®æ›´æ–°ãŒElasticsearchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«åæ˜ ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if cassandra_write_detected:
    check_elasticsearch_index_update()
```

## è©³ç´°è¨ˆç”»

è©³ç´°ãªã‚¿ã‚¹ã‚¯ã¨ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¯ [`../TODO.md`](../TODO.md) ã®Phase 4ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

**é–‹å§‹æ—¥**: 2026å¹´1æœˆ6æ—¥ï¼ˆäºˆå®šï¼‰
